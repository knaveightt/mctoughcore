# manages the armor slots and max hearts of the player
###

# adjust max hearts via a non-removable chainmail helmet
execute as @a[scores={tcTotalHearts=8}] at @s run replaceitem entity @p armor.head minecraft:chainmail_helmet{display:{Name:'{"text":"Blocked"}'},Unbreakable:1b,Enchantments:[{id:"minecraft:binding_curse",lvl:1s}],AttributeModifiers:[{AttributeName:"generic.armor",Name:"generic.armor",Amount:0,Operation:0,UUID:[I;1154377470,-185578328,-2064671743,201365983]},{AttributeName:"generic.armor_toughness",Name:"generic.armor_toughness",Amount:0,Operation:0,UUID:[I;442878570,-216907387,-1952216400,1322507252]},{AttributeName:"generic.max_health",Name:"generic.max_health",Amount:-4,Operation:0,UUID:[I;801877972,1118061869,-1408096532,-2036168108]}]} 1
execute as @a[scores={tcTotalHearts=6}] at @s run replaceitem entity @p armor.head minecraft:chainmail_helmet{display:{Name:'{"text":"Blocked"}'},Unbreakable:1b,Enchantments:[{id:"minecraft:binding_curse",lvl:1s}],AttributeModifiers:[{AttributeName:"generic.armor",Name:"generic.armor",Amount:0,Operation:0,UUID:[I;-822203000,1605322659,-1647902848,1725895832]},{AttributeName:"generic.armor_toughness",Name:"generic.armor_toughness",Amount:0,Operation:0,UUID:[I;-1947934399,440553271,-1963803044,-2099498079]},{AttributeName:"generic.max_health",Name:"generic.max_health",Amount:-8,Operation:0,UUID:[I;1732134017,-2104276713,-1499520530,659061614]}]} 1
execute as @a[scores={tcTotalHearts=4}] at @s run replaceitem entity @p armor.head minecraft:chainmail_helmet{display:{Name:'{"text":"Blocked"}'},Unbreakable:1b,Enchantments:[{id:"minecraft:binding_curse",lvl:1s}],AttributeModifiers:[{AttributeName:"generic.armor",Name:"generic.armor",Amount:0,Operation:0,UUID:[I;799392777,-1305327516,-2140360706,-920375530]},{AttributeName:"generic.armor_toughness",Name:"generic.armor_toughness",Amount:0,Operation:0,UUID:[I;324049586,-1378923863,-1837684522,990413786]},{AttributeName:"generic.max_health",Name:"generic.max_health",Amount:-12,Operation:0,UUID:[I;1182926181,-534493202,-1358823797,-11775038]}]} 1
execute as @a[scores={tcTotalHearts=2}] at @s run replaceitem entity @p armor.head minecraft:chainmail_helmet{display:{Name:'{"text":"Blocked"}'},Unbreakable:1b,Enchantments:[{id:"minecraft:binding_curse",lvl:1s}],AttributeModifiers:[{AttributeName:"generic.armor",Name:"generic.armor",Amount:0,Operation:0,UUID:[I;-2032088155,1392003221,-1548488638,-507206893]},{AttributeName:"generic.armor_toughness",Name:"generic.armor_toughness",Amount:0,Operation:0,UUID:[I;602012395,-1997322424,-2076054707,678201062]},{AttributeName:"generic.max_health",Name:"generic.max_health",Amount:-16,Operation:0,UUID:[I;727805033,2084719852,-1181542908,768498912]}]} 1

# continue to restrict armor slots for each additional death
execute as @a[scores={tcTotalHearts=..6}] at @s run replaceitem entity @s armor.feet minecraft:chainmail_boots{display:{Name:'{"text":"Blocked"}'},Unbreakable:1b,Enchantments:[{id:"minecraft:binding_curse",lvl:1s}],AttributeModifiers:[{AttributeName:"generic.armor",Name:"generic.armor",Amount:0,Operation:0,UUID:[I;-1974457613,1469531550,-1640208797,-419804028]},{AttributeName:"generic.armor_toughness",Name:"generic.armor_toughness",Amount:0,Operation:0,UUID:[I;-288918048,312755506,-1697754982,-1836777061]}]} 1
execute as @a[scores={tcTotalHearts=..4}] at @s run replaceitem entity @s armor.legs minecraft:chainmail_leggings{display:{Name:'{"text":"Blocked"}'},Unbreakable:1b,Enchantments:[{id:"minecraft:binding_curse",lvl:1s}],AttributeModifiers:[{AttributeName:"generic.armor",Name:"generic.armor",Amount:0,Operation:0,UUID:[I;994591994,22233191,-1249592738,841293088]},{AttributeName:"generic.armor_toughness",Name:"generic.armor_toughness",Amount:0,Operation:0,UUID:[I;43858065,2062895957,-1814169358,244478791]}]} 1
execute as @a[scores={tcTotalHearts=..2}] at @s run replaceitem entity @s armor.chest minecraft:chainmail_chestplate{display:{Name:'{"text":"Blocked"}'},Unbreakable:1b,Enchantments:[{id:"minecraft:binding_curse",lvl:1s}],AttributeModifiers:[{AttributeName:"generic.armor",Name:"generic.armor",Amount:0,Operation:0,UUID:[I;1495100390,575097428,-2106663017,-1132898133]},{AttributeName:"generic.armor_toughness",Name:"generic.armor_toughness",Amount:0,Operation:0,UUID:[I;-2087342667,-1420016111,-1790122782,2004930832]}]} 1

# as the player gains back max hearts, make sure they gain back armor slots as well
execute as @a[scores={tcTotalHearts=10}] at @s run clear @s minecraft:chainmail_helmet{display:{Name:'{"text":"Blocked"}'}} 1
execute as @a[scores={tcTotalHearts=10}] at @s run clear @s minecraft:chainmail_boots{display:{Name:'{"text":"Blocked"}'}} 1
execute as @a[scores={tcTotalHearts=10}] at @s run clear @s minecraft:chainmail_leggings{display:{Name:'{"text":"Blocked"}'}} 1
execute as @a[scores={tcTotalHearts=10}] at @s run clear @s minecraft:chainmail_chestplate{display:{Name:'{"text":"Blocked"}'}} 1
execute as @a[scores={tcTotalHearts=8}] at @s run clear @s minecraft:chainmail_boots{display:{Name:'{"text":"Blocked"}'}} 1
execute as @a[scores={tcTotalHearts=8}] at @s run clear @s minecraft:chainmail_leggings{display:{Name:'{"text":"Blocked"}'}} 1
execute as @a[scores={tcTotalHearts=8}] at @s run clear @s minecraft:chainmail_chestplate{display:{Name:'{"text":"Blocked"}'}} 1
execute as @a[scores={tcTotalHearts=6}] at @s run clear @s minecraft:chainmail_leggings{display:{Name:'{"text":"Blocked"}'}} 1
execute as @a[scores={tcTotalHearts=6}] at @s run clear @s minecraft:chainmail_chestplate{display:{Name:'{"text":"Blocked"}'}} 1
execute as @a[scores={tcTotalHearts=4}] at @s run clear @s minecraft:chainmail_chestplate{display:{Name:'{"text":"Blocked"}'}} 1

# make sure no non-removable, armorslot-restricting items get lose and can be picked up accidentally 
execute as @e[type=item,nbt={Item:{tag:{display:{Name:'{"text":"Blocked"}'}}}}] at @s run kill @s
